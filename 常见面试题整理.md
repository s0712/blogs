# 常见面试题整理
- https和http的区别?
> 1. https协议需要到CA申请证书,一般免费证书很少,需要交费  
> 2.HTTP协议运行在TCP之上,所有传输的内容都是明文,HTTPS运行在SSL/TLS之上,SSL/TLS运行在TCP之上,所有的传输的内容都是经过加密的  
> 3.HTTP和HTTPS使用的是完全不同的连接方式,用的端口也不一样,前者是80,后者是443  
> 4.HTTPS可以有效的防止运营商劫持,解决了防劫持的一个大问题  

![](%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/BB682B56-53AC-404E-879B-41E0DA7EB2A4.png)


- http2比http1的优势or新特性?
> **速度更快**  
> **新的二进制格式**(http1.x的解析是基于文本.基于文本协议的格式解析存在天然缺陷,文本的表现形式有多样性,要做到健壮性考虑的场景必然很多,二进制则不同,只认0和1的组合,基于这种考虑HTTP2.0的协议解析决定采用二进制格式,实现方便且健壮)  
> **多路复用**:即连接共享,即每一个request都是用作连接共享机制的 ,一个request对应一个id,这样一个连接上可以有多个request,每个连接的request可以随机的混杂在一起,接收方可以根据request的id将request在归属到各自不同的服务器端请求里面  
> **header压缩**:如上文所言,对前面提到过的HTTP1.x的header带有大量的信息,而且每次都要重复发送,HTTP2.0使用encoder来减少需要传输的header大小,通讯双方各自cache一份header fields表,既避免了重复header的传输,又减少了需要传输的大小  
> **服务端推送,**:同SPDY一样,HTTP2.0也具有sever push功能  
> 服务器推送是什么? 服务端推送能把客户端所需要的资源伴随着index.html一起发送到客户端,省去了客户端重复请求的步骤,正因为没有发起请求,建立连接等操作,所以静态资源通过服务端推送的方式可以极大的提升速度.  
>   
![](%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/5600E008-9E75-4A5D-8AF6-CC182A5A7FFE.png)
![](%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/3F8EC8EC-1117-4CEB-99A1-E498A0DFA292.png)

- 宏任务和微任务?
> 概念:  
> 1. 宏任务:当前调用栈中执行的代码成为宏任务.(主代码块,定时器等)  
> 2.微任务:当前(此次事件循环中) 宏任务执行完,在下一个宏任务开始之前需要执行的任务,可以理解为回掉时间( promise.then, proness.nextTick 等等)  
> 3. 宏任务中的事件放在callback queue中,由事件触发线程维护; 微任务的事件放在微任务队列中,由js引擎线程维护  
运行机制:
1.在执行栈中执行一个宏任务.
2.执行过程中遇到微任务,将微任务添加到微任务队列中.
3.当前宏任务执行完毕,立即执行微任务队列中的任务.
4.当前微任务队列中的任务执行完毕,检查渲染,GUI线程接管渲染
5,渲染完毕后,js线程接管,开启下一次事件循环,执行下一次宏任务(事件队列中取)